import{a as T,b as V}from"./chunk-SVB5GPOP.js";import{a as I}from"./chunk-HXMLE2GD.js";import{a as A,c as P}from"./chunk-P5HVQK73.js";import"./chunk-37K4UUCH.js";import{a as q,b as B}from"./chunk-VYKHLPEH.js";import{a as G,e as U,f as j}from"./chunk-XEENCP3G.js";import{a as D}from"./chunk-GXOHLRUE.js";import{h as M,o as y,p as s,r as F,s as C,u as N,v as w,w as x,x as E,y as _}from"./chunk-G6ZGHL4Y.js";import{Db as b,Mb as n,Qb as v,Va as S,d as f,e as c,ea as m,f as g,ja as h,nb as p,vb as o,wb as t,xb as u}from"./chunk-GRUJPSUA.js";var re=(()=>{var a;let r=class r{constructor(){c(this,a,void 0);this.authService=m(I),this.toastr=m(D),g(this,a,m(M)),this.form=m(E).nonNullable.group({fullname:["",s.required],email:["",[s.required,s.email]],password:["",s.required]})}signup(){this.authService.signUp(this.form.value).subscribe({next:l=>{l.success&&(this.toastr.success("User signed up successfully"),this.authService.signIn(this.form.value).subscribe({next:e=>{if(e.success){let i=V(e.data);this.authService.$state.set({_id:i._id,fullname:i.fullname,email:i.email,password:"",jwt:e.data}),f(this,a).navigate(["/medications"]),this.toastr.success("User signed in successfully")}},error:e=>{this.toastr.error("Wrong email or password")}}))},error:l=>{this.toastr.error("User already exists")}})}};a=new WeakMap,r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=h({type:r,selectors:[["app-signup"]],standalone:!0,features:[v],decls:15,vars:2,consts:[[3,"ngSubmit","formGroup"],["matInput","","formControlName","fullname"],["matInput","","formControlName","email"],["matInput","","type","password","formControlName","password"],["mat-raised-button","","type","submit",3,"disabled"]],template:function(e,i){e&1&&(o(0,"form",0),b("ngSubmit",function(){return i.signup()}),o(1,"mat-form-field")(2,"mat-label"),n(3,"Full Name"),t(),u(4,"input",1),t(),o(5,"mat-form-field")(6,"mat-label"),n(7,"Email"),t(),u(8,"input",2),t(),o(9,"mat-form-field")(10,"mat-label"),n(11,"Password"),t(),u(12,"input",3),t(),o(13,"button",4),n(14," Submit "),t()()),e&2&&(p("formGroup",i.form),S(13),p("disabled",i.form.invalid))},dependencies:[_,N,y,F,C,w,x,j,U,G,B,q,T,P,A],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}"]});let d=r;return d})();export{re as SignupComponent};
