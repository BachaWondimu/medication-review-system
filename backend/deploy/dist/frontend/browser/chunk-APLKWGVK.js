import{a as B}from"./chunk-URTPZ67E.js";import{a as w}from"./chunk-P5HVQK73.js";import"./chunk-37K4UUCH.js";import{a as k}from"./chunk-VYKHLPEH.js";import{a as O,b as P,e as V}from"./chunk-XEENCP3G.js";import{a as I}from"./chunk-GXOHLRUE.js";import{a as E,h as M,o as x,p as d,r as N,s as F,u as A,v as T,w as q,x as D,y as G}from"./chunk-G6ZGHL4Y.js";import{Db as y,Mb as n,Qb as S,Va as s,d as _,e as h,ea as l,f as v,ja as C,lb as b,nb as g,rb as u,vb as t,wb as e,xb as f}from"./chunk-GRUJPSUA.js";function H(i,r){i&1&&(t(0,"mat-error"),n(1,"Name is required"),e())}function L(i,r){i&1&&(t(0,"mat-error"),n(1,"Medication name already exists"),e())}function z(i,r){i&1&&(t(0,"mat-error"),n(1,"Availability is required"),e())}function J(i,r){i&1&&(t(0,"mat-error"),n(1,"Availability should be OTC or Prescription"),e())}var ne=(()=>{var r,c;let m=class m{constructor(){h(this,r,void 0);h(this,c,void 0);v(this,r,l(E)),v(this,c,l(M)),this.med_service=l(B),this.toastr=l(I),this.form=l(D).nonNullable.group({name:["",[d.required],this.check_name_exists.bind(this)],generic_name:["",d.required],medication_class:["",d.required],availability:["",[d.required,d.pattern(/OTC|Prescription/)]],image:""})}setFile(a){this.file=a.target.files[0],this.toastr.success("File uploaded successfully")}get name(){return this.form.controls.name}get availability(){return this.form.controls.availability}addMedication(){let a=new FormData;a.append("name",this.form.get("name")?.value),a.append("generic_name",this.form.get("generic_name")?.value),a.append("medication_class",this.form.get("medication_class")?.value),a.append("availability",this.form.get("availability")?.value),a.append("medication_image",this.file),_(this,r).post("http://localhost:3000/medications",a).subscribe(p=>{this.toastr.success("Medication added successfully"),this.form.reset(),_(this,c).navigate(["/medications"])})}check_name_exists(a){return this.med_service.get_medications_by_name(this.name.value)}};r=new WeakMap,c=new WeakMap,m.\u0275fac=function(p){return new(p||m)},m.\u0275cmp=C({type:m,selectors:[["app-add"]],standalone:!0,features:[S],decls:24,vars:6,consts:[[3,"ngSubmit","formGroup"],["matInput","","formControlName","name"],["matInput","","formControlName","generic_name"],["matInput","","formControlName","medication_class"],["matInput","","formControlName","availability"],["formControlName","image","type","file",3,"change"],["mat-raised-button","","type","submit",3,"disabled"]],template:function(p,o){p&1&&(t(0,"form",0),y("ngSubmit",function(){return o.addMedication()}),t(1,"mat-form-field")(2,"mat-label"),n(3,"Name"),e(),f(4,"input",1),b(5,H,2,0,"mat-error")(6,L,2,0,"mat-error"),e(),t(7,"mat-form-field")(8,"mat-label"),n(9,"Generic_name"),e(),f(10,"input",2),e(),t(11,"mat-form-field")(12,"mat-label"),n(13,"Medication_class"),e(),f(14,"input",3),e(),t(15,"mat-form-field")(16,"mat-label"),n(17,"Availability"),e(),b(18,z,2,0,"mat-error")(19,J,2,0,"mat-error"),f(20,"input",4),e(),t(21,"input",5),y("change",function(j){return o.setFile(j)}),e(),t(22,"button",6),n(23," Submit "),e()()),p&2&&(g("formGroup",o.form),s(5),u(5,o.name.hasError("required")?5:-1),s(),u(6,o.name.hasError("exists")?6:-1),s(12),u(18,o.availability.hasError("required")?18:-1),s(),u(19,o.availability.hasError("pattern")?19:-1),s(3),g("disabled",o.form.invalid))},dependencies:[G,A,x,N,F,T,q,V,k,O,w,P],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}"]});let i=m;return i})();export{ne as AddComponent};
